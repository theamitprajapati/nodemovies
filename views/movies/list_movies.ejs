<%- include ../header %>

<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">


    <h2>&nbsp;</h2>
    <h2>Moveis Reports</h2>
    <form class="needs-validation" novalidate="">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="lastName">Genre</label>
                <select class="form-control" id="genre" name="genre">
                    <option value="">--select--</option>
                    <% genres_list.forEach((res,index)=>{%>
                    <option value="<%-res.id%>"><%-res.title%></option>
                   <%})%>
                </select>
            </div>
            <div class="col-md-3 mt-4">
                <button class="btn btn-primary btn-lg btn-block" type="submit">Filter</button>
            </div>
        </div>

    </form>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
            <tr>
                <th>Sr.</th>
                <th>Titel</th>
                <th>Year</th>
                <th>Directory</th>
                <th>Genre</th>
                <th>Description</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <% var i = 1; rows.forEach((row,index)=>{%>
            <tr>
                <td><%-i++;%></td>
                <td><%-row.title%></td>
                <td><%-row.year%></td>
                <td><%-row.director%></td>
                <td><%-row.genres.length?row.genres[0].title:'-' %></td>
                <td><%-row.description%></td>
                <td><a href="../movies/edit_movie?id=<%-row.id%>">Edit</a> | <a href="../movies/details_movie?id=<%-row.id%>"> View </a>|<a href="../movies/delete_movie?id=<%-row.id%>"> Delete </a> </td>
            </tr>
            <%})%>

            </tbody>
        </table>
    </div>
</main>

<%- include ../footer %>